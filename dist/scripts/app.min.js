const formatNumber=function(a,t){var e={en:{k:"K",m:"M",b:"B",t:"T"},de:{k:" Tsd.",m:" Mio.",b:" Mrd.",t:" Bio."},fr:{k:" k",m:" M",b:" Md",t:" Bn"}},n=["de","fr"].includes(app.language)?app.language:"en";return t?a<1e3?parseInt(a,10):1e3<=a&&a<1e6?(a/1e3).toLocaleString(app.locale,{minimumFractionDigits:0,maximumFractionDigits:0})+e[n].k:1e6<=a&&a<1e9?(a/1e6).toLocaleString(app.locale,{minimumFractionDigits:0,maximumFractionDigits:1})+e[n].m:1e9<=a&&a<1e12?(a/1e9).toLocaleString(app.locale,{minimumFractionDigits:0,maximumFractionDigits:2})+e[n].b:1e12<=a?(a/1e12).toLocaleString(app.locale,{minimumFractionDigits:0,maximumFractionDigits:2})+e[n].t:void 0:a<1e3?parseInt(a,10):1e3<=a&&a<1e6?(a/1e3).toLocaleString(app.locale,{minimumFractionDigits:0,maximumFractionDigits:0})+e[n].k:1e6<=a&&a<1e9?(a/1e6).toLocaleString(app.locale,{minimumFractionDigits:1,maximumFractionDigits:1})+e[n].m:1e9<=a&&a<1e12?(a/1e9).toLocaleString(app.locale,{minimumFractionDigits:2,maximumFractionDigits:2})+e[n].b:1e12<=a?(a/1e12).toLocaleString(app.locale,{minimumFractionDigits:2,maximumFractionDigits:2})+e[n].t:void 0},formatMoney=function(a){return["de","fr"].includes(app.language)?a+" US$":"US$"+a},app={body:$("body"),basepath:$("body").data("basepath"),page:$("body").data("default-page")?$("body").data("default-page"):"problem",data:{},region:"global",locale:window.navigator.userLanguage||window.navigator.language,language:"en",step:0,year:(new Date).getFullYear(),windowHeight:$(window).height(),windowWidth:$(window).width(),scrollTop:0,revealer:$(".revealer"),onScreen:function(a){var t=a.offset();return 0<t.top+a.height()&&t.top<app.windowHeight},getTotal:function(t,e,n,i){let o=0;if(void 0===app.data[t][e])return o;if(i=(i=i&&parseInt(i,10))||2015,!(n=n&&parseInt(n,10))){n=app.year;const p=new Date;var a=Date.UTC(n,p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()),s=Date.UTC(n,0,1);o+=(a-s)/1e3/24/60/60*app.data[t][e][n],n--}for(let a=i;a<=n;a++)o+=365*app.data[t][e][a];return o},updateViewport:function(){app.windowHeight=$(window).height(),app.windowWidth=$(window).width(),app.viewport=1024<=app.windowWidth?"desktop":768<=app.windowWidth?"tablet":"mobile"},resizePage:function(){app.body.addClass("is-resizing"),app.updateViewport();var a=Math.sqrt(Math.pow(app.windowWidth,2)+Math.pow(app.windowHeight,2));app.revealer.css({width:a+"px",height:a+"px",transform:"translate3d(-50%, -50%, 0px) rotate3d(0, 0, 1, -135deg) translate3d(0px, "+a+"px, 0px)"}),app.animations.dots1.two&&(app.animations.dots1.two.width=app.animations.dots1.canvas.width(),app.animations.dots1.two.height=app.animations.dots1.canvas.height(),app.animations.dots1.two.update()),app.animations.dots2.two&&(app.animations.dots2.two.width=app.animations.dots2.canvas.width(),app.animations.dots2.two.height=app.animations.dots2.canvas.height(),app.animations.dots2.two.update()),setTimeout(function(){app.body.removeClass("is-resizing")},500)},updatePage:function(){app.animateElements(),window.requestAnimationFrame(app.updatePage)},animateElements:function(){app.animations.onView.animate(),"problem"===app.page&&(app.animations.dateReplacement.animate(),app.animations.scrolled.animate(),app.animations.countUp.animate(),app.animations.dots1.animate()),"solution"===app.page&&app.animations.dots2.animate()},animations:{scrolled:{elements:$(".problem__wrapper"),active:!0,animate:function(){app.animations.scrolled.active&&app.step<4&&app.animations.scrolled.elements.offset().top<0&&(app.animations.scrolled.active=!1,app.steps.four())}},dots1:{canvas:$(".problem__canvas__inner"),two:!1,active:!1,lastTime:{os:Math.random(),c19:Math.random(),bau:Math.random()},event:{count:0,time:0,delta:0,last:0,first:0},dots:[],animate:function(){if(app.animations.dots1.active){var a=(new Date).getTime()/1e3;0===app.animations.dots1.event.first&&(app.animations.dots1.event.first=a,app.animations.dots1.event.last=a),app.animations.dots1.event.time=a-app.animations.dots1.event.first,app.animations.dots1.event.delta=a-app.animations.dots1.event.last,app.animations.dots1.event.count++;for(var t=app.animations.dots1.dots.length-1;0<=t;t--)app.animations.dots1.dots[t].iterate(app.animations.dots1.two),app.animations.dots1.dots[t].offscreen&&(app.animations.dots1.dots[t].item.remove(),app.animations.dots1.dots.splice(t,1)),app.animations.dots1.dots[t].landed&&(app.animations.dots1.dots[t].item.remove(),app.animations.dots1.dots.splice(t,1));5<=app.step&&(app.animations.dots1.event.time-app.animations.dots1.lastTime.os>86400/app.data.os_c19.Both[app.year]&&(app.animations.dots1.lastTime.os=app.animations.dots1.event.time,app.animations.dots1.dots.push(new Dot(app.animations.dots1.two,"#2E75FE"))),app.animations.dots1.event.time-app.animations.dots1.lastTime.c19>86400/(app.data.lp_c19.Both[app.year]-app.data.lp.Both[app.year])&&(app.animations.dots1.lastTime.c19=app.animations.dots1.event.time,app.animations.dots1.dots.push(new Dot(app.animations.dots1.two,"#FBA55F",!0))),app.animations.dots1.event.time-app.animations.dots1.lastTime.bau>86400/app.data.lp.Both[app.year]&&(app.animations.dots1.lastTime.bau=app.animations.dots1.event.time,app.animations.dots1.dots.push(new Dot(app.animations.dots1.two,"#2E75FE",!0)))),app.animations.dots1.two.update()}},init:function(){var a;app.animations.dots1.two||(a={width:app.animations.dots1.canvas.width(),height:app.animations.dots1.canvas.height()},app.animations.dots1.two=new Two(a).appendTo(app.animations.dots1.canvas[0]),app.animations.dots1.active=!0)}},dots2:{canvas:$(".solution__canvas__inner"),two:!1,active:!1,secured:0,lastTime:{os:Math.random(),secured:Math.random()},event:{count:0,time:0,delta:0,last:0,first:0},dots:[],animate:function(){if(app.animations.dots2.active&&app.onScreen(app.animations.dots2.canvas)){var a=(new Date).getTime()/1e3;0===app.animations.dots2.event.first&&(app.animations.dots2.event.first=a,app.animations.dots2.event.last=a),app.animations.dots2.event.time=a-app.animations.dots2.event.first,app.animations.dots2.event.delta=a-app.animations.dots2.event.last,app.animations.dots2.event.count++;for(var t=app.animations.dots2.dots.length-1;0<=t;t--)app.animations.dots2.dots[t].iterate(app.animations.dots2.two),app.animations.dots2.dots[t].offscreen&&(app.animations.dots2.dots[t].item.remove(),app.animations.dots2.dots.splice(t,1));app.animations.dots2.event.time-app.animations.dots2.lastTime.os>86400/app.data.os_c19.Both[app.year]&&(app.animations.dots2.lastTime.os=app.animations.dots2.event.time,app.animations.dots2.dots.push(new Dot(app.animations.dots2.two,"#2E75FE"))),0<app.animations.dots2.secured&&app.animations.dots2.event.time-app.animations.dots2.lastTime.secured>86400/app.animations.dots2.secured&&(app.animations.dots2.lastTime.secured=app.animations.dots2.event.time,app.animations.dots2.dots.push(new Dot(app.animations.dots2.two,"#00CFB0"))),app.animations.dots2.two.update()}},init:function(){var a={width:app.animations.dots2.canvas.width(),height:app.animations.dots2.canvas.height()};app.animations.dots2.two=new Two(a).appendTo(app.animations.dots2.canvas[0]),app.animations.dots2.active=!0}},countUp:{elements:$(".js-countup"),lastTime:0,frameDuration:1e3/60,active:!1,easing:function(a){return a*a*a*a*a},run:function(e,n,a){let i=0;const o=parseInt(e.innerHTML.replace(/[^\d]/g,""),10),s=Math.round(a/app.animations.countUp.frameDuration),p=setInterval(function(){i++;var a=app.animations.countUp.easing(i/s);const t=Math.round((n-o)*a)+o;parseInt(e.innerHTML,10)!==t&&(e.innerHTML=t.toLocaleString(app.locale)),i===s&&clearInterval(p)},app.animations.countUp.frameDuration)},init:function(){app.animations.countUp.elements.length&&(app.animations.countUp.run(app.animations.countUp.elements[0],app.getTotal("lp_c19","Both"),5e3),setTimeout(function(){app.animations.countUp.active=!0},6e3))},animate:function(){var a;app.animations.countUp.active&&(new Date,a=(new Date).getTime()/1e3,timestamp=parseInt(a,10),timestamp>app.animations.countUp.lastTime&&app.onScreen(app.animations.countUp.elements)&&(app.animations.countUp.lastTime=timestamp,app.animations.countUp.run(app.animations.countUp.elements[0],app.getTotal("lp_c19","Both"),500)))}},dateReplacement:{elements:$("[data-date-replacement]"),lastTime:0,animate:function(){if(1===app.step){const o=new Date,a=parseInt(o.getTime()/1e3,10);a>app.animations.dateReplacement.lastTime&&(app.animations.dateReplacement.lastTime=a,app.animations.dateReplacement.elements.each(function(){const a=$(this),t=a.data("date-replacement");let e,n;var i;n=["de","fr"].includes(app.language)?(e=o.toLocaleDateString(app.language,{year:"numeric",month:"long",day:"numeric"}),o.toLocaleTimeString(app.language,{hour:"2-digit",minute:"2-digit",second:"2-digit"})):"na"===app.region?(i=o.getSeconds(),e=o.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}).replace(",",""),o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}).toLowerCase()+" and "+i+" second"+(1!==i?"s":"")):(e=o.toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"}),o.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),a.text(t.replace("{{date}}",e).replace("{{time}}",n))}))}}},onView:{elements:$(".js-onview"),animate:function(){if(3<=app.step){let e=!1;app.animations.onView.elements.each(function(a){const t=$(this);app.windowHeight+app.scrollTop-app.windowHeight/5>t.offset().top&&(t.addClass("is-viewed"),e=!0,t.hasClass("js-quantification")&&(t.find("svg").addClass("blue"),setTimeout(function(){t.find("svg").addClass("orange")},2e3)))}),e&&(app.animations.onView.elements=$(".js-onview").not(".is-viewed"))}}}},reloadAnimationElements:function(){app.animations.onView.elements=$(".js-onview")},clickHandling:function(){app.click.toggle.init()},click:{toggle:{init:function(){app.body.on("click","[data-page]",function(a){a.preventDefault();a=$(this).data("page");if("advanced"===a&&app.advanced.ready&&!app.advanced.active&&app.advanced.init(),"advanced"!==app.page&&"advanced"!==a){const t=$(this).prop("href"),e=t.split("#");if(void 0!==e[1]){const n=app.body.find("#"+e[1]);n.length&&n.animate({scrollTop:0},0)}app.body.addClass("is-turning"),setTimeout(function(){app.body.removeClass("is-turning")},1e3)}$.each(app.body.attr("class").split(" "),function(a,t){0===t.indexOf("page--")&&app.body.removeClass(t)}),app.body.addClass("page--"+a),app.page=a,app.animations.dots1.two&&(app.animations.dots1.two.clear(),app.animations.dots1.two.update(),app.animations.dots1.dots=[]),app.animations.dots2.two&&(app.animations.dots2.two.clear(),app.animations.dots2.two.update(),app.animations.dots2.dots=[])}),app.body.on("click","[data-toggle-body]",function(a){a.preventDefault(),app.body.toggleClass("has-"+$(this).data("toggle-body"))})}}},quantification:{elements:$(".js-quantification"),init:function(){app.quantification.elements.each(function(){const a=$(this),t=a.data("period");let e=0;switch(t){case"hour":e=Math.round(app.data.lp_c19.Both[app.year]/24);break;case"day":e=Math.round(app.data.lp_c19.Both[app.year]);break;case"week":e=Math.round(7*app.data.lp_c19.Both[app.year]);break;case"month":e=Math.round(30*app.data.lp_c19.Both[app.year]);break;case"year":e=Math.round(365*app.data.lp_c19.Both[app.year])}a.find(".js-quantification-value").html(e.toLocaleString(app.locale))})}},inlineSvg:{elements:$(".js-inline-svg"),init:function(){app.body.addClass("region--"+app.region),$(".js-number-format").each(function(){const a=$(this),t=a.data("number");t&&a.text(t.toLocaleString(app.locale))}),app.inlineSvg.elements.each(function(){const t=$(this),a=t.data("svg-"+app.region);a&&t.load(a,function(){const a=t.find("svg");a.css({"max-width":a[0].viewBox.baseVal.width}),a.find("circle, ellipse").each(function(){$(this).css({"transition-delay":Math.round(2e3*Math.random())+"ms"})})})})}},fundingSliders:{elements:{slider:$(".js-funding-slider"),total:$(".js-funding-total"),secured:$(".js-funding-secured"),gdp:$(".js-funding-gdp"),poverty:$(".js-funding-poverty"),revenue:$(".js-funding-revenue"),lives:$(".js-funding-lives"),marriage:$(".js-funding-marriage"),malnutrition:$(".js-funding-malnutrition")},updateTotal:function(a){let o=0,s=0,p={gdp:0,poverty:0,revenue:0,lives:0,marriage:0,malnutrition:0};app.fundingSliders.elements.slider.each(function(a){let t=parseFloat($(this)[0].noUiSlider.get()),e=t/1e9,n="High income countries";switch(a){case 0:n="Low Income Countries";break;case 1:n="Lower Middle Income Countries";break;case 2:n="Upper Middle Income Countries"}o+=t,s+=("number"!=typeof app.funding[4][n]?parseFloat(app.funding[4][n].replace(/[^\d\.]/g,"")):app.funding[4][n])*e,app.animations.dots2.secured=s/10/365;let i=5;$.each(p,function(a){p[a]+=("number"!=typeof app.funding[i][n]?parseFloat(app.funding[i][n].replace(/[^\d\.]/g,"")):app.funding[i][n])*e,i++})});let e=formatMoney(formatNumber(o));app.fundingSliders.elements.total.text()!==e&&app.fundingSliders.elements.total.text(e),e=Math.round(s).toLocaleString(app.locale),app.fundingSliders.elements.secured.text()!==e&&(a?app.animations.countUp.run(app.fundingSliders.elements.secured[0],Math.round(s),300):app.fundingSliders.elements.secured.text(e)),$.each(p,function(a,t){e=Math.round(t).toLocaleString(app.locale),app.fundingSliders.elements[a].text()!==e&&app.fundingSliders.elements[a].text(e)})},init:function(){app.fundingSliders.elements.slider.each(function(){const a=$(this),i=$("#"+a.data("amount"));noUiSlider.create(a[0],{start:a.data("start"),orientation:"vertical",direction:"rtl",range:{min:a.data("min"),max:a.data("max")},step:25e7,pips:{mode:"count",values:2,density:10,format:{to:function(a){return formatMoney(formatNumber(a,!0))}}}}).on("slide",function(a,t,e,n){a=formatMoney(formatNumber(a[0]));i.html(a),app.fundingSliders.updateTotal(n)})})}},totalSlider:{elements:$(".js-total-slider"),init:function(){app.totalSlider.elements.each(function(){const a=$(this);let t,e;a.data("count-id")&&(t=$("#"+a.data("count-id"))),a.data("year-id")&&(e=$("#"+a.data("year-id"))),noUiSlider.create(a[0],{connect:"lower",start:a.data("start"),step:1,range:{min:a.data("min"),max:a.data("max")}}).on("update",function(a){a=parseInt(a[0],10);e&&e.html(a),t&&app.animations.countUp.run(t[0],app.getTotal("lp_c19","Both",a),500)})})}},advanced:{elements:$(".js-advanced-slider"),ready:!1,active:!1,charts:[],barCharts:$(".js-bar-chart"),c19:"on",year:2030,datasets:{},income:["Low Income","Lower-Middle Income","Upper-Middle Income","High Income"],wb:["East Asia and Pacific","Europe and Central Asia","Latin America and Carribean","Middle East and North Africa","North America","South Asia","Sub-Saharan Africa"],un:["East Asia and Pacific","Eastern Europe and Central Asia","Western Europe","Latin America and Carribean","Middle East and North Africa","North America","South Asia","Eastern and Southern Africa","Western and Central Africa"],refresh:function(){app.advanced.barCharts.length&&app.advanced.barCharts.each(function(a){const t=$(this),e=t.data("facet"),n=t.data("type"),i=app.advanced.charts[a];void 0!==i&&(i.data.datasets=app.advanced.datasets[app.advanced.year][app.advanced.c19][n][e],i.update())})},init:function(){app.advanced.active=!0,Chart.defaults.color="#081248",Chart.defaults.font.family="'Colfax', Helvetica, Arial, sans-serif",Chart.defaults.font.size=10,Chart.defaults.font.lineHeight=1.7,Chart.defaults.elements.bar.backgroundColor="#2E75FE",Chart.defaults.elements.bar.borderColor="#2E75FE",Chart.defaults.elements.bar.borderWidth=0,Chart.defaults.elements.bar.pointStyle=!1;const l={};for(let c=2015;c<=2030;c++)l[c]={},$.each(["on","off"],function(a,r){l[c][r]={},$.each(["lp","os"],function(a,d){l[c][r][d]={},$.each(["gender"],function(a,t){if("on"===r)switch(d){case"lp":l[c][r][d][t]=[{data:{Male:app.getTotal(d,"Male",c,c),Female:app.getTotal(d,"Female",c,c)}}],l[c][r][d][t].push({backgroundColor:"#FBA55F",data:{Male:app.getTotal(d+"_c19","Male",c,c)-l[c][r][d][t][0].data.Male,Female:app.getTotal(d+"_c19","Female",c,c)-l[c][r][d][t][0].data.Female}});break;case"os":l[c][r][d][t]=[{data:{Male:app.getTotal(d+"_c19","Male",c,c),Female:app.getTotal(d+"_c19","Female",c,c)}}],l[c][r][d][t].push({backgroundColor:"transparent",borderWidth:1,data:{Male:app.getTotal(d,"Male",c,c)-l[c][r][d][t][0].data.Male,Female:app.getTotal(d,"Female",c,c)-l[c][r][d][t][0].data.Female}})}else l[c][r][d][t]=[{data:{Male:app.getTotal(d,"Male",c,c),Female:app.getTotal(d,"Female",c,c)}}]});let p="income";l[c][r][d][p]=[],$.each(["male","female"],function(a,i){let o={stack:i,data:[]};if($.each(app.advanced.income,function(a,t){t=t+": "+i.replace(/^([a-z])/g,function(a){return a.toUpperCase()});let e=d;"on"===r&&"os"===d&&(e+="_c19"),o.data.push(app.getTotal(e,t,c,c))}),l[c][r][d][p].push(o),"on"===r){const s=l[c][r][d][p].length-1;o={backgroundColor:"os"==d?"transparent":"#FBA55F",borderWidth:"os"==d?1:0,stack:i,data:[]},$.each(app.advanced.income,function(a,t){var e=t+": "+i.replace(/^([a-z])/g,function(a){return a.toUpperCase()}),t=o.data.length,t=l[c][r][d][p][s].data[t];let n=d;"on"===r&&"os"===d||(n+="_c19"),o.data.push(app.getTotal(n,e,c,c)-t)}),l[c][r][d][p].push(o)}}),$.each(["un","wb"],function(a,p){l[c][r][d][p]=[],$.each(["male","female"],function(a,i){let o={stack:i,data:[]};if($.each(app.advanced[p],function(a,t){t=p.toUpperCase()+" - "+t+": "+i.replace(/^([a-z])/g,function(a){return a.toUpperCase()});let e=d;"on"===r&&"os"===d&&(e+="_c19"),o.data.push(app.getTotal(e,t,c,c))}),l[c][r][d][p].push(o),"on"===r){const s=l[c][r][d][p].length-1;o={backgroundColor:"os"==d?"transparent":"#FBA55F",borderWidth:"os"==d?1:0,stack:i,data:[]},$.each(app.advanced[p],function(a,t){var e=p.toUpperCase()+" - "+t+": "+i.replace(/^([a-z])/g,function(a){return a.toUpperCase()}),t=o.data.length,t=l[c][r][d][p][s].data[t];let n=d;"on"===r&&"os"===d||(n+="_c19"),o.data.push(app.getTotal(n,e,c,c)-t)}),l[c][r][d][p].push(o)}})})})});app.advanced.datasets=l,$(".js-advanced-covid").on("click",function(a){a.preventDefault(),"on"===app.advanced.c19?(app.body.addClass("covid-off"),app.advanced.c19="off"):(app.body.removeClass("covid-off"),app.advanced.c19="on"),app.advanced.refresh()}),$(".js-advanced-region").on("click",function(a){a.preventDefault();const t=$(this);t.data("un")?app.body.addClass("un"):t.data("wb")?app.body.removeClass("un"):app.body.toggleClass("un"),app.advanced.refresh()}),app.advanced.elements.each(function(){const a=$(this);let t;a.data("count-id")&&$("#"+a.data("count-id")),a.data("year-id")&&(t=$("#"+a.data("year-id"))),noUiSlider.create(a[0],{connect:"lower",start:a.data("start"),step:1,range:{min:a.data("min"),max:a.data("max")}}).on("set",function(a){app.advanced.year=parseInt(a[0],10),t&&t.html(app.advanced.year),app.advanced.refresh()}),app.advanced.barCharts.length&&app.advanced.barCharts.each(function(a){const t=$(this),e=t.data("facet"),n=t.data("type"),i=t.data("max"),o=t.data("y-title"),s={type:"bar",data:{datasets:app.advanced.datasets[app.advanced.year][app.advanced.c19][n][e]},options:{responsive:!0,maintainAspectRatio:!1,maxBarThickness:40,plugins:{tooltip:{backgroundColor:"#000",cornerRadius:0,caretSize:0,mode:"point",displayColors:!1,callbacks:{title:function(a,t){return""},label:function(a){return Math.round(a.parsed.y).toLocaleString(app.locale)}},bodyFont:{size:14,family:"'Colfax', Helvetica, Arial, sans-serif",weight:700,lineHeight:1.6},bodySpacing:10,padding:10},legend:{display:!1}},scales:{x:{stacked:!0,grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{stacked:!0,beginAtZero:!0,ticks:{callback:function(a,t,e){return t%2?"":formatNumber(a,!0)},count:11},grid:{drawBorder:!1},title:{display:!0,text:o.toUpperCase()}}}}};void 0!==app.advanced[e]&&(s.data.labels=app.advanced[e]),i&&(s.options.scales.y.max=i),app.advanced.charts.push(new Chart(t.find("canvas"),s))})})}},steps:{timeout:!1,one:function(){clearTimeout(app.steps.timeout),app.step=1,app.body.addClass("s1-on"),app.steps.timeout=setTimeout(function(){app.body.addClass("s1-out").removeClass("s1-on"),app.steps.timeout=setTimeout(function(){app.body.addClass("s1-off s2-on").removeClass("s1-out"),app.steps.timeout=setTimeout(function(){app.steps.two()},1e3)},1e3)},7500)},two:function(){clearTimeout(app.steps.timeout),app.windowHeight=$(window).height(),app.step=2,app.body.addClass("s1-off s2-on").removeClass("s1-on s1-out"),app.animations.countUp.init(),app.steps.timeout=setTimeout(function(){app.steps.three()},2e3)},three:function(){clearTimeout(app.steps.timeout),app.windowHeight=$(window).height(),app.step=3,app.body.addClass("s1-off s2-on s3-on").removeClass("s1-on s1-out"),app.steps.timeout=setTimeout(function(){app.body.addClass("s3-off"),app.steps.timeout=setTimeout(function(){app.body.addClass("s4-in"),app.steps.timeout=setTimeout(function(){app.steps.four()},2e3)},1e3)},2e3)},four:function(){clearTimeout(app.steps.timeout),app.animations.countUp.elements.length&&(app.animations.countUp.active=!0),app.windowHeight=$(window).height(),app.step=4,app.body.addClass("s1-off s2-on s3-on s3-off s4-in s4-on").removeClass("s1-on s1-out"),app.steps.timeout=setTimeout(function(){app.steps.five()},4e3),app.animations.dots1.init()},five:function(){clearTimeout(app.steps.timeout),app.windowHeight=$(window).height(),app.step=5,app.body.addClass("s1-off s2-on s3-on s3-off s4-in s4-on s5-on").removeClass("s1-on s1-out")}},init:function(){app.language=app.locale.substr(0,2).toLowerCase(),$('a[href]:not([href*="://'+window.location.hostname+'"]):not([href^="."]):not([href^="#"]):not([href^="/"]):not([href^="javascript:"]):not([href^="mailto:"])').attr("target","_blank").addClass("external");let a="one";if(window.location.hash){const n=window.location.hash.substr(1),i=n.split("&").reduce(function(a,t){t=t.split("=");return a[t[0]]=t[1],a},{});void 0!==i.step&&(a=i.step),void 0!==i.country&&void 0!==countries[i.country]&&(app.country=i.country,["NA","EU","AF"].includes(countries[app.country])&&(app.region=countries[i.country].toLowerCase()),app.inlineSvg.init()),void 0!==i.language&&["en","de","fr"].includes(i.language.toLowerCase())&&(app.language=i.language.toLowerCase())}else"problem"!==app.page&&(a="five");var t=$("html").prop("lang");"en"===t?["de","fr"].includes(app.language)&&window.open(app.basepath+app.language+"/","_self"):["de","fr"].includes(t)&&(app.language=t,app.locale=t),void 0===app.country&&$.ajax({url:"https://www.one.org/cdn-cgi/trace",dataType:"text",success:function(a){a=a.match(/loc\=(\w+)/i);a&&(app.country=a[1],void 0!==countries[app.country]&&["NA","EU","AF"].includes(countries[app.country])&&(app.region=countries[app.country].toLowerCase()))},complete:function(){app.inlineSvg.init()}});const e=[];$.each({lp_c19:"7_lp_c19_bau.json",lp:"1_lp_bau.json",os_c19:"8_os_c19_bau.json",os:"2_os_bau.json"},function(n,a){app.data[n]={};a=$.ajax({url:app.basepath+"data/json/"+a,dataType:"json",success:function(a){$.each(a,function(a,t){var e=t[""];delete t[""],app.data[n][e]=t})}});e.push(a)}),$.when.apply($,e).done(function(){app.quantification.init(),app.totalSlider.init(),app.animations.dots2.init(),app.advanced.ready=!0,$.ajax({url:app.basepath+"data/json/summary.json",dataType:"json",success:function(a){app.funding=a},complete:function(){app.fundingSliders.init()}})}),app.body.addClass("page--"+app.page),app.resizePage(),app.clickHandling(),window.requestAnimationFrame(app.updatePage),void 0!==app.steps[a]&&app.steps[a]()}};$(document).ready(app.init),$(window).on("load",function(){app.resizePage(),$("body").addClass("is-loaded")}).on("throttledresize",function(){app.resizePage()});const gravity=1.2,originY=130,Dot=function(a,t,e){this.bounces=0,this.lost=e||!1,this.falling=!1,this.offscreen=!1,this.landed=!1,this.direction=1,this.gravity=gravity,this.radius=5,this.scaling=.5,this.color=t,this.vector=new Two.Vector(1.8+.2*Math.random(),.1),this.item=a.makeCircle(-50*Math.random(),originY-this.radius*this.scaling,this.radius),this.item.fill=this.color,this.item.scale=this.scaling,this.item.noStroke()};Dot.prototype.land=function(a){this.item.position.getDistance(a.item.position)<this.radius*this.scaling*2&&(4<this.bounces?this.landed=!0:(this.vector.x=.5*Math.sign(this.vector.x),this.vector.y=3,this.gravity=1/gravity,this.direction=-1,this.bounces+=1))},Dot.prototype.iterate=function(a){let t=150;var e,n=a.width/2,i=768<=a.width?80:40;this.lost||this.item.position.x>=n-90&&this.item.position.x<=80+n&&(t=this.item.position.x>=n-50&&this.item.position.x<=20+n?70:110),!this.falling&&this.item.position.y>=t-this.radius*this.scaling&&(this.lost&&this.item.position.x>=n-i?(this.gravity=1,this.falling=!0,this.vector.y=2,e=Math.random()*a.width-this.item.position.x,i=a.height-this.item.position.y,this.vector.x=e/i*this.vector.y):(this.item.position.x>=n-90&&this.item.position.x<=n-30?this.vector.y=3:this.item.position.x>=n&&this.item.position.x<=120+n&&(this.vector.y=2.75),this.item.position.x>=90+n?this.gravity=1/gravity*1.02:this.gravity=1/gravity*1.05,this.direction=-1)),this.vector.y<.1&&(this.vector.y=.1,this.gravity=gravity,this.direction=1),this.falling?(this.vector.y*=this.gravity,this.item.position.x+=this.vector.x,this.item.position.y+=this.direction*this.vector.y,this.item.position.y>a.height&&(this.landed=!0)):(this.item.scale=this.scaling=.5+.5*this.item.position.x/n,this.item.position.y<=0-this.radius*this.scaling&&(this.vector.y=.1,this.gravity=gravity,this.direction=1),this.vector.y*=this.gravity,this.item.position.x+=this.vector.x,this.item.position.y+=this.direction*this.vector.y,this.item.position.x>a.width+this.radius*this.scaling&&(this.offscreen=!0))};const countries={BD:"AS",BE:"EU",BF:"AF",BG:"EU",BA:"EU",BB:"NA",WF:"OC",BL:"NA",BM:"NA",BN:"AS",BO:"SA",BH:"AS",BI:"AF",BJ:"AF",BT:"AS",JM:"NA",BV:"AN",BW:"AF",WS:"OC",BQ:"NA",BR:"SA",BS:"NA",JE:"EU",BY:"EU",BZ:"NA",RU:"EU",RW:"AF",RS:"EU",TL:"OC",RE:"AF",TM:"AS",TJ:"AS",RO:"EU",TK:"OC",GW:"AF",GU:"OC",GT:"NA",GS:"AN",GR:"EU",GQ:"AF",GP:"NA",JP:"AS",GY:"SA",GG:"EU",GF:"SA",GE:"AS",GD:"NA",GB:"EU",GA:"AF",SV:"NA",GN:"AF",GM:"AF",GL:"NA",GI:"EU",GH:"AF",OM:"AS",TN:"AF",JO:"AS",HR:"EU",HT:"NA",HU:"EU",HK:"AS",HN:"NA",HM:"AN",VE:"SA",PR:"NA",PS:"AS",PW:"OC",PT:"EU",SJ:"EU",PY:"SA",IQ:"AS",PA:"NA",PF:"OC",PG:"OC",PE:"SA",PK:"AS",PH:"AS",PN:"OC",PL:"EU",PM:"NA",ZM:"AF",EH:"AF",EE:"EU",EG:"AF",ZA:"AF",EC:"SA",IT:"EU",VN:"AS",SB:"OC",ET:"AF",SO:"AF",ZW:"AF",SA:"AS",ES:"EU",ER:"AF",ME:"EU",MD:"EU",MG:"AF",MF:"NA",MA:"AF",MC:"EU",UZ:"AS",MM:"AS",ML:"AF",MO:"AS",MN:"AS",MH:"OC",MK:"EU",MU:"AF",MT:"EU",MW:"AF",MV:"AS",MQ:"NA",MP:"OC",MS:"NA",MR:"AF",IM:"EU",UG:"AF",TZ:"AF",MY:"AS",MX:"NA",IL:"AS",FR:"EU",IO:"AS",SH:"AF",FI:"EU",FJ:"OC",FK:"SA",FM:"OC",FO:"EU",NI:"NA",NL:"EU",NO:"EU",NA:"AF",VU:"OC",NC:"OC",NE:"AF",NF:"OC",NG:"AF",NZ:"OC",NP:"AS",NR:"OC",NU:"OC",CK:"OC",XK:"EU",CI:"AF",CH:"EU",CO:"SA",CN:"AS",CM:"AF",CL:"SA",CC:"AS",CA:"NA",CG:"AF",CF:"AF",CD:"AF",CZ:"EU",CY:"EU",CX:"AS",CR:"NA",CW:"NA",CV:"AF",CU:"NA",SZ:"AF",SY:"AS",SX:"NA",KG:"AS",KE:"AF",SS:"AF",SR:"SA",KI:"OC",KH:"AS",KN:"NA",KM:"AF",ST:"AF",SK:"EU",KR:"AS",SI:"EU",KP:"AS",KW:"AS",SN:"AF",SM:"EU",SL:"AF",SC:"AF",KZ:"AS",KY:"NA",SG:"AS",SE:"EU",SD:"AF",DO:"NA",DM:"NA",DJ:"AF",DK:"EU",VG:"NA",DE:"EU",YE:"AS",DZ:"AF",US:"NA",UY:"SA",YT:"AF",UM:"OC",LB:"AS",LC:"NA",LA:"AS",TV:"OC",TW:"AS",TT:"NA",TR:"AS",LK:"AS",LI:"EU",LV:"EU",TO:"OC",LT:"EU",LU:"EU",LR:"AF",LS:"AF",TH:"AS",TF:"AN",TG:"AF",TD:"AF",TC:"NA",LY:"AF",VA:"EU",VC:"NA",AE:"AS",AD:"EU",AG:"NA",AF:"AS",AI:"NA",VI:"NA",IS:"EU",IR:"AS",AM:"AS",AL:"EU",AO:"AF",AQ:"AN",AS:"OC",AR:"SA",AU:"OC",AT:"EU",AW:"NA",IN:"AS",AX:"EU",AZ:"AS",IE:"EU",ID:"AS",UA:"EU",QA:"AS",MZ:"AF"};